<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

    <!--Description-->
    
        <meta name="description" content="每个人都很忙，谢谢你有空来看看">
    

    <!--Author-->
    
        <meta name="author" content="Dragon Orange">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="代码可读性-格式和测试"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="woodccc"/>

    <!--Page Cover-->
    
        <meta property="og:image" content="undefined"/>
    

    <!-- Title -->
    
    <title>代码可读性-格式和测试 - woodccc</title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/main.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


</head>

<body>

<!-- Menu -->
<!-- Navigation -->
<header>
    <div class="logo">
        <a href="/">woodccc</a>
    </div><!-- end logo -->

    <div id="menu_icon"></div>
    <nav>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/archives">Archives</a>
            </li>
            
        </ul>
    </nav><!-- end navigation menu -->

    <div class="footer clearfix">
        <ul class="social clearfix">
            
            
            
            
            
            
        </ul><!-- end social -->

        <div class="rights">
            <p>Copyright © 2014 magnetic.</p>
            <p>Template by <a href="http://pixelhint.com/magnetic-free-html5-responsive-photography-website-template/">Pixelhint.com</a></p>
            <p>Hexo Theme by <a href="http://www.codeblocq.com/">Jonathan K.</a></p>
        </div><!-- end rights -->
    </div ><!-- end footer -->
</header><!-- end header -->

<!-- Main Content -->
<section class="main clearfix">

    <section class="top" style="background: url('/images/default_post_page_cover_image.jpg');">
        <div class="wrapper content_header clearfix">
            

<div class="work_nav">

    <ul class="btn clearfix">
        
        <li><a href="/2016/12/30/Learn-React-Advanced-guides-note/" class="previous" data-title="Learn React Advanced guides note"></a></li>
        
        <li><a href="/" class="grid" data-title="Portfolio"></a></li>
        
        <li><a href="/2016/12/11/代码可读性-命名和函数/" class="next" data-title="代码可读性-命名和函数"></a></li>
        
    </ul>

</div><!-- end work_nav -->
            <h1 class="title">代码可读性-格式和测试</h1>
        </div>
    </section><!-- end top -->

    <section class="wrapper">
        <div class="content">

            <!-- Gallery -->
            

            <!-- Content -->
            <h2 id="代码可读性"><a href="#代码可读性" class="headerlink" title="代码可读性"></a>代码可读性</h2><h3 id="格式和测试"><a href="#格式和测试" class="headerlink" title="格式和测试"></a>格式和测试</h3><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><h3 id="读代码就像是读文章、小说、新闻"><a href="#读代码就像是读文章、小说、新闻" class="headerlink" title="读代码就像是读文章、小说、新闻"></a>读代码就像是读文章、小说、新闻</h3><p>阅读的顺序一般来说都是从上到下，从左到右</p>
<ul>
<li>竖向格式 {:&amp;.rollIn}</li>
<li>横向格式</li>
</ul>
<h2 id="竖向格式"><a href="#竖向格式" class="headerlink" title="竖向格式"></a>竖向格式</h2><h3 id="距离产生美"><a href="#距离产生美" class="headerlink" title="距离产生美"></a>距离产生美</h3><p>有距离的代码是这样的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">…</div><div class="line">	<span class="keyword">const</span> &#123; UDFs, type &#125; = <span class="keyword">this</span>.props</div><div class="line">	</div><div class="line">	<span class="keyword">const</span> textFields = <span class="keyword">this</span>.handleGroupByType(<span class="string">'Text'</span>)</div><div class="line">	<span class="keyword">const</span> numericFields = <span class="keyword">this</span>.handleGroupByType(<span class="string">'Numeric'</span>)</div><div class="line">    <span class="keyword">const</span> timeFields = <span class="keyword">this</span>.handleGroupByType(<span class="string">'Time'</span>)</div><div class="line">    <span class="keyword">const</span> datetimeFields = concat(<span class="keyword">this</span>.handleGroupByType(<span class="string">'Datetime'</span>), timeFields)</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> UDFsFunctions = sortBy(filterByUdfTypes(UDFs, [FUNCTION_TYPE_UDF]), UDF =&gt; UDF.name)</div><div class="line">    <span class="keyword">const</span> UDAFsFunctions = filterByUdfTypes(UDFs, [FUNCTION_TYPE_UDAF])</div><div class="line">    <span class="keyword">const</span> NORMALsFunctions = filterByUdfTypes(UDFs, [FUNCTION_TYPE_NORMAL])</div><div class="line">    <span class="keyword">const</span> basicFunctions = isNotMetric(type) ? [...UDFsFunctions, ...NORMALsFunctions] : UDFsFunctions</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> numericFunctions = filterByReturnType(basicFunctions, <span class="string">'Numeric'</span>)</div><div class="line">    <span class="keyword">const</span> textFunctions = filterByReturnType(basicFunctions, <span class="string">'Text'</span>)</div><div class="line">    <span class="keyword">const</span> datetimeFunctions = filterByReturnType(basicFunctions, <span class="string">'Datetime'</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> distinctUDAFs = uniqBy(UDAFsFunctions, <span class="string">'name'</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> aggregateFunctions = sortBy(distinctUDAFs, <span class="string">'name'</span>)</div><div class="line">    <span class="keyword">const</span> aggregateFunctionsFilter = filter(aggregateFunctions, aggregateFunction =&gt; aggregateFunction.tag != <span class="string">'None'</span>)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (</div><div class="line">…</div></pre></td></tr></table></figure>
<p>没有距离就变成下面这样了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">…</div><div class="line">	<span class="keyword">const</span> &#123; UDFs, type &#125; = <span class="keyword">this</span>.props</div><div class="line">	<span class="keyword">const</span> textFields = <span class="keyword">this</span>.handleGroupByType(<span class="string">'Text'</span>)</div><div class="line">	<span class="keyword">const</span> numericFields = <span class="keyword">this</span>.handleGroupByType(<span class="string">'Numeric'</span>)</div><div class="line">    <span class="keyword">const</span> timeFields = <span class="keyword">this</span>.handleGroupByType(<span class="string">'Time'</span>)</div><div class="line">    <span class="keyword">const</span> datetimeFields = concat(<span class="keyword">this</span>.handleGroupByType(<span class="string">'Datetime'</span>), timeFields)</div><div class="line">    <span class="keyword">const</span> UDFsFunctions = sortBy(filterByUdfTypes(UDFs, [FUNCTION_TYPE_UDF]), UDF =&gt; UDF.name)</div><div class="line">    <span class="keyword">const</span> UDAFsFunctions = filterByUdfTypes(UDFs, [FUNCTION_TYPE_UDAF])</div><div class="line">    <span class="keyword">const</span> NORMALsFunctions = filterByUdfTypes(UDFs, [FUNCTION_TYPE_NORMAL])</div><div class="line">    <span class="keyword">const</span> basicFunctions = isNotMetric(type) ? [...UDFsFunctions, ...NORMALsFunctions] : UDFsFunctions</div><div class="line">    <span class="keyword">const</span> numericFunctions = filterByReturnType(basicFunctions, <span class="string">'Numeric'</span>)</div><div class="line">    <span class="keyword">const</span> textFunctions = filterByReturnType(basicFunctions, <span class="string">'Text'</span>)</div><div class="line">    <span class="keyword">const</span> datetimeFunctions = filterByReturnType(basicFunctions, <span class="string">'Datetime'</span>)</div><div class="line">    <span class="keyword">const</span> distinctUDAFs = uniqBy(UDAFsFunctions, <span class="string">'name'</span>)  </div><div class="line">    <span class="keyword">const</span> aggregateFunctions = sortBy(distinctUDAFs, <span class="string">'name'</span>)</div><div class="line">    <span class="keyword">const</span> aggregateFunctionsFilter = filter(aggregateFunctions, aggregateFunction =&gt; aggregateFunction.tag != <span class="string">'None'</span>)</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">…</div></pre></td></tr></table></figure>
<p>我也经常这样子做代码格式的处理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Radio <span class="keyword">from</span> <span class="string">'antd/lib/radio'</span></div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> Button <span class="keyword">from</span> <span class="string">'components/commons/Button'</span></div><div class="line"><span class="keyword">import</span> VirtualFieldDropDownMenu <span class="keyword">from</span> <span class="string">'./VirtualFieldDropDownMenu'</span></div><div class="line"><span class="keyword">import</span> VirtualFieldPreview <span class="keyword">from</span> <span class="string">'./VirtualFieldPreview'</span></div><div class="line"><span class="keyword">import</span> VirtualMetricPreview <span class="keyword">from</span> <span class="string">'./VirtualMetricPreview'</span></div><div class="line"><span class="keyword">import</span> Notification <span class="keyword">from</span> <span class="string">'components/Notification'</span></div><div class="line"><span class="keyword">import</span> Title <span class="keyword">from</span> <span class="string">'./Title'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; insertField, insertFunction, filterByReturnType, filterByUdfTypes &#125; <span class="keyword">from</span> <span class="string">'./virtualFieldService'</span></div><div class="line"><span class="keyword">import</span> isNotUndefined <span class="keyword">from</span> <span class="string">'utils/lodash/isNotUndefined'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> ReportActions <span class="keyword">from</span> <span class="string">'actions/report'</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> DataSetFieldsActions <span class="keyword">from</span> <span class="string">'actions/dataSetFields'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> ReportSelectors <span class="keyword">from</span> <span class="string">'selectors/report'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> isUndefined <span class="keyword">from</span> <span class="string">'lodash/isUndefined'</span></div><div class="line"><span class="keyword">import</span> trim <span class="keyword">from</span> <span class="string">'lodash/trim'</span></div><div class="line"><span class="keyword">import</span> isEmpty <span class="keyword">from</span> <span class="string">'lodash/isEmpty'</span></div><div class="line"><span class="keyword">import</span> concat <span class="keyword">from</span> <span class="string">'lodash/concat'</span></div><div class="line"><span class="keyword">import</span> uniqBy <span class="keyword">from</span> <span class="string">'lodash/uniqBy'</span></div><div class="line"><span class="keyword">import</span> sortBy <span class="keyword">from</span> <span class="string">'lodash/orderBy'</span></div><div class="line"><span class="keyword">import</span> filter <span class="keyword">from</span> <span class="string">'lodash/filter'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; FUNCTION_TYPE_UDF, FUNCTION_TYPE_NORMAL, FUNCTION_TYPE_UDAF &#125; <span class="keyword">from</span> <span class="string">'constants/BindingItemsConstants'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'./VirtualField.styl'</span></div></pre></td></tr></table></figure>
<h3 id="适当的距离"><a href="#适当的距离" class="headerlink" title="适当的距离"></a>适当的距离</h3><p>没有间距</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">handleAddNewUsers() &#123;</div><div class="line">	<span class="keyword">const</span> &#123; newUsers &#125; = <span class="keyword">this</span>.state</div><div class="line">	<span class="keyword">if</span> (isEmpty(newUsers)) <span class="keyword">return</span> Notification.error(<span class="string">'所选用户不能为空'</span>)</div><div class="line">	<span class="keyword">this</span>.props.updateUsersInUserGroup(<span class="keyword">this</span>.props.viewUserGroup.id, &#123;<span class="attr">userIds</span>: newUsers&#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">	  responseNotification(response, <span class="string">'添加成功'</span>)</div><div class="line">	  <span class="keyword">this</span>.setState(&#123;<span class="attr">newUsers</span>: []&#125;)</div><div class="line">	&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>很多间距</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">handleAddNewUsers() &#123;</div><div class="line">  </div><div class="line">    <span class="keyword">const</span> &#123; newUsers &#125; = <span class="keyword">this</span>.state</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (isEmpty(newUsers)) <span class="keyword">return</span> Notification.error(<span class="string">'所选用户不能为空'</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">this</span>.props.updateUsersInUserGroup(<span class="keyword">this</span>.props.viewUserGroup.id, &#123;<span class="attr">userIds</span>: newUsers&#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">    </div><div class="line">      responseNotification(response, <span class="string">'添加成功'</span>)</div><div class="line">      </div><div class="line">      <span class="keyword">this</span>.setState(&#123;<span class="attr">newUsers</span>: []&#125;)</div><div class="line">      </div><div class="line">    &#125;)</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>适当的间距</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">handleAddNewUsers() &#123;</div><div class="line">    <span class="keyword">const</span> &#123; newUsers &#125; = <span class="keyword">this</span>.state</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (isEmpty(newUsers)) <span class="keyword">return</span> Notification.error(<span class="string">'所选用户不能为空'</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">this</span>.props.updateUsersInUserGroup(<span class="keyword">this</span>.props.viewUserGroup.id, &#123;<span class="attr">userIds</span>: newUsers&#125;)</div><div class="line">    	.then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">      		responseNotification(response, <span class="string">'添加成功'</span>)</div><div class="line">      		<span class="keyword">this</span>.setState(&#123;<span class="attr">newUsers</span>: []&#125;)</div><div class="line">    	&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>大家一起看看这段代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">handleSaveReport(&#123; name, directory, isSaveAsCopy &#125;) &#123;</div><div class="line">    <span class="keyword">const</span> &#123; workingReport, reportId &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (isSaveAsCopy) &#123;</div><div class="line">      <span class="keyword">const</span> requestParams = saveReportCopyRequestParams(name, directory, workingReport)</div><div class="line">      <span class="keyword">this</span>.props.createReportCopy(requestParams, <span class="keyword">this</span>.state.directoryOfCurrentReport).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        Notification.success(<span class="string">'另存成功'</span>)</div><div class="line">        <span class="keyword">this</span>.setState(&#123;<span class="attr">openSaveReportDialog</span>: <span class="literal">false</span>, <span class="attr">isSaveAsCopy</span>: <span class="literal">false</span>&#125;)</div><div class="line">      &#125;).catch(<span class="function">(<span class="params">errors</span>) =&gt;</span> forEach(errors, error =&gt; Notification.error(error)))</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">const</span> request = saveReportRequestParams(name, directory, workingReport)</div><div class="line">      <span class="keyword">this</span>.props.saveWorkingReport(reportId, request, <span class="keyword">this</span>.props.currentPageId).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        Notification.success(<span class="string">'报表已保存'</span>)</div><div class="line">        <span class="keyword">this</span>.setState(&#123;<span class="attr">openSaveReportDialog</span>: <span class="literal">false</span>, <span class="attr">isSaveAsCopy</span>: <span class="literal">false</span>&#125;)</div><div class="line">      &#125;).catch(<span class="function">(<span class="params">errors</span>) =&gt;</span> forEach(errors, error =&gt; Notification.error(error)))</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="修改意见"><a href="#修改意见" class="headerlink" title="修改意见"></a>修改意见</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">handleSaveReport(&#123; name, directory, isSaveAsCopy &#125;) &#123;</div><div class="line">    <span class="keyword">const</span> &#123; workingReport, reportId &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (isSaveAsCopy) &#123;</div><div class="line">    </div><div class="line">      <span class="keyword">const</span> requestParams = saveReportCopyRequestParams(name, directory, workingReport)</div><div class="line">      </div><div class="line">      <span class="keyword">this</span>.props.createReportCopy(requestParams, <span class="keyword">this</span>.state.directoryOfCurrentReport)</div><div class="line">	      .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">	        Notification.success(<span class="string">'另存成功'</span>)</div><div class="line">	        <span class="keyword">this</span>.setState(&#123;<span class="attr">openSaveReportDialog</span>: <span class="literal">false</span>, <span class="attr">isSaveAsCopy</span>: <span class="literal">false</span>&#125;)</div><div class="line">	      &#125;)</div><div class="line">	      .catch(<span class="function">(<span class="params">errors</span>) =&gt;</span> forEach(errors, error =&gt; Notification.error(error)))</div><div class="line">	      </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">    </div><div class="line">      <span class="keyword">const</span> request = saveReportRequestParams(name, directory, workingReport)</div><div class="line">      </div><div class="line">      <span class="keyword">this</span>.props.saveWorkingReport(reportId, request, <span class="keyword">this</span>.props.currentPageId)</div><div class="line">	      .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">	        Notification.success(<span class="string">'报表已保存'</span>)</div><div class="line">	        <span class="keyword">this</span>.setState(&#123;<span class="attr">openSaveReportDialog</span>: <span class="literal">false</span>, <span class="attr">isSaveAsCopy</span>: <span class="literal">false</span>&#125;)</div><div class="line">	      &#125;)</div><div class="line">	      .catch(<span class="function">(<span class="params">errors</span>) =&gt;</span> forEach(errors, error =&gt; Notification.error(error)))</div><div class="line">	 &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h2 id="划重点（此处用力敲黑板）"><a href="#划重点（此处用力敲黑板）" class="headerlink" title="划重点（此处用力敲黑板）"></a>划重点（此处用力敲黑板）</h2><h3 id="1-有关联的代码放在一块，并且与其他代码块用空行隔开（垂直方向上的靠近与距离）"><a href="#1-有关联的代码放在一块，并且与其他代码块用空行隔开（垂直方向上的靠近与距离）" class="headerlink" title="1.有关联的代码放在一块，并且与其他代码块用空行隔开（垂直方向上的靠近与距离）"></a>1.有关联的代码放在一块，并且与其他代码块用空行隔开（垂直方向上的靠近与距离）</h3><h3 id="2-垂直顺序（自上而下的展示函数调用依赖顺序）"><a href="#2-垂直顺序（自上而下的展示函数调用依赖顺序）" class="headerlink" title="2.垂直顺序（自上而下的展示函数调用依赖顺序）"></a>2.垂直顺序（自上而下的展示函数调用依赖顺序）</h3><h2 id="横向格式"><a href="#横向格式" class="headerlink" title="横向格式"></a>横向格式</h2><h3 id="横向的间隔与靠近"><a href="#横向的间隔与靠近" class="headerlink" title="横向的间隔与靠近"></a>横向的间隔与靠近</h3><p>有横向间隔的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> quarter = <span class="built_in">Math</span>.floor((today.getMonth() + <span class="number">3</span>) / <span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>删除这些横向间隔</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> quarter=<span class="built_in">Math</span>.floor((today.getMonth()+<span class="number">3</span>)/<span class="number">3</span>)</div></pre></td></tr></table></figure>
<h3 id="强调运算优先级"><a href="#强调运算优先级" class="headerlink" title="强调运算优先级"></a>强调运算优先级</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">…</div><div class="line"><span class="keyword">const</span> XXX = (<span class="built_in">Math</span>.…) + (a*<span class="number">2</span>)</div><div class="line">…</div></pre></td></tr></table></figure>
<p>横向格式应有空格的地方（此处用力敲黑板）</p>
<ul>
<li>运算符前后：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> view = <span class="keyword">this</span>.props.view</div></pre></td></tr></table></figure>
<ul>
<li>函数花括号前： </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">handleChange() &#123;  …  &#125;</div></pre></td></tr></table></figure>
<ul>
<li>逗号后面：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">handleSave(arg1, arg2) &#123;  …  &#125;</div><div class="line"></div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div></pre></td></tr></table></figure>
<ul>
<li>解构:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; id, name &#125; = view</div></pre></td></tr></table></figure>
<ul>
<li>……</li>
</ul>
<p>[slide]</p>
<p>{:&amp;.rollIn}</p>
<h2 id="格式（完）"><a href="#格式（完）" class="headerlink" title="格式（完）"></a>格式（完）</h2><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h3 id="使用函数"><a href="#使用函数" class="headerlink" title="使用函数"></a>使用函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'buildSelectorValue'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'should return new selector when oldSelectors is empty'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> oldSelectors = &#123;&#125;</div><div class="line">    <span class="keyword">const</span> originalSelector = buildOriginalSelector(<span class="number">1</span>, [<span class="string">'四川'</span>])</div><div class="line">    <span class="keyword">const</span> exceptSelector = buildExceptSelector(<span class="number">1</span>, [<span class="string">'四川'</span>])</div><div class="line"></div><div class="line">    expect(buildSelectorValue(oldSelectors, originalSelector)).to.eql(exceptSelector)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="使用常量"><a href="#使用常量" class="headerlink" title="使用常量"></a>使用常量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">it(<span class="string">'should return selectors deleted by viewId'</span>, () =&gt; &#123;</div><div class="line">  expect(deleteSelectorByViewId(twoViewsState, deleteSelectorViewId)).to.eql(oneViewState)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> deleteSelectorViewId = <span class="string">'1'</span></div><div class="line"><span class="keyword">const</span> twoViewsState = &#123;</div><div class="line">  <span class="string">'1'</span>: &#123;</div><div class="line">    <span class="attr">pageId</span>: <span class="number">1</span>,</div><div class="line">    <span class="attr">dataSetId</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">values</span>: [&#123;</div><div class="line">      <span class="attr">fieldId</span>: <span class="number">4</span>,</div><div class="line">      <span class="attr">selectorValues</span>: [<span class="string">'四川'</span>]</div><div class="line">    &#125;]</div><div class="line">  &#125;,</div><div class="line">  <span class="string">'2'</span>: &#123;</div><div class="line">    <span class="attr">pageId</span>: <span class="number">1</span>,</div><div class="line">    <span class="attr">dataSetId</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">values</span>: [&#123;</div><div class="line">      <span class="attr">fieldId</span>: <span class="number">4</span>,</div><div class="line">      <span class="attr">selectorValues</span>: [<span class="string">'广东'</span>]</div><div class="line">    &#125;]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">…</div></pre></td></tr></table></figure>
<h3 id="使用函数和常量的利与弊"><a href="#使用函数和常量的利与弊" class="headerlink" title="使用函数和常量的利与弊"></a>使用函数和常量的利与弊</h3><hr>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:center">利</th>
<th>弊</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">函数</td>
<td style="text-align:center">便于重用</td>
<td>逻辑复杂 </td>
</tr>
<tr>
<td style="text-align:left">函数</td>
<td style="text-align:center">不会暴露细节</td>
<td>不够直观</td>
</tr>
<tr>
<td style="text-align:left">常量</td>
<td style="text-align:center">无逻辑</td>
<td>重复太多</td>
</tr>
<tr>
<td style="text-align:left">常量</td>
<td style="text-align:center">够直观</td>
<td>异常点不是很明确</td>
</tr>
</tbody>
</table>
<h1 id="完"><a href="#完" class="headerlink" title="完"></a>完</h1>

            <!-- Tags -->
            


<div class="tags">
    
</div>



            <!-- Comments -->
            <div>
                


            </div>
        </div><!-- end content -->
    </section>
</section><!-- end main -->

<!-- After footer scripts -->

<!-- jQuery -->
<script src="/js/jquery.js"></script>

<!-- Custom Code -->
<script src="/js/main.js"></script>

<!-- Gallery -->
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->


</body>

</html>